<h1 id="title" class="title">Register School</h1>
<nb-alert *ngIf="showMessages.error && errors?.length && !submitted" outline="danger" role="alert">
  <p class="alert-title"><b>Oh snap!</b></p>
  <ul class="alert-message-list">
    <li *ngFor="let error of errors" class="alert-message">{{ error }}</li>
  </ul>
</nb-alert>
<nb-alert *ngIf="showMessages.success && messages?.length && !submitted" outline="success" role="alert">
  <p class="alert-title"><b>Hooray!</b></p>
  <ul class="alert-message-list">
    <li *ngFor="let message of messages" class="alert-message">{{ message }}</li>
  </ul>
</nb-alert>
<form (ngSubmit)="register()" #form="ngForm" aria-labelledby="title">
  <div class="row ">
    <div class="col-md-6">
      <div class="form-control-group">
        <label class="label" for="input-email">Select School:</label>
        <nb-select [(ngModel)]="user.type"
                   #type="ngModel"
                   id="input-type"
                   name="type"
                   fullWidth
                   type="number"
                   [status]="type.dirty ? (type.invalid  ? 'danger' : 'success') : ''"
                   [required]="getConfigValue('forms.validation.type.required')"
                   [attr.aria-invalid]="type.invalid && type.touched ? true : null"
                   placeholder="Select School">
          <nb-option  *ngFor="let item of typeList " value="{{item.value}}">{{item.description}}</nb-option>
        </nb-select>
        <a routerLink="/auth/add-school" class="float-right mt-2">Add New</a>
        <ng-container *ngIf="type.invalid && type.touched">
          <p class="error-message" *ngIf="type.errors?.required">
            School Type is required!
          </p>
        </ng-container>
      </div>
    </div>
    <div class="col-md-6">
      <div class="form-control-group">
        <label class="label" for="input-email">Registration:</label>
        <input nbInput
               [(ngModel)]="user.registration"
               #registration="ngModel"
               id="input-registration"
               name="registration"
               placeholder="Registration No."
               fullWidth
               [status]="registration.dirty ? (registration.invalid  ? 'danger' : 'success') : ''"
               [required]="getConfigValue('forms.validation.registration.required')"
               [minlength]="getConfigValue('forms.validation.registration.minLength')"
               [maxlength]="getConfigValue('forms.validation.registration.maxLength')"
               [attr.aria-invalid]="registration.invalid && registration.touched ? true : null">
        <ng-container *ngIf="registration.invalid && registration.touched">
          <p class="error-message" *ngIf="registration.errors?.required">
            Registration Number is required!
          </p>
        </ng-container>
      </div>
    </div>

  </div>
  <div class="row ">
    <div class="col-md-6">
      <div class="form-control-group">
        <label class="label" for="input-email">Contact Person:</label>
        <input nbInput
               [(ngModel)]="user.contactPerson"
               #contactPerson="ngModel"
               id="input-name"
               name="contactPerson"
               placeholder="Contact Person Name"
               fullWidth
               disabled="disabled">
      </div>
    </div>
    <div class="col-md-6">
      <div class="form-control-group">
        <label class="label" for="input-name">Address:</label>
        <input nbInput
               [(ngModel)]="user.address"
               #address="ngModel"
               id="input-name"
               name="address"
               placeholder="School Address"
               fullWidth
               [status]="address.dirty ? (address.invalid  ? 'danger' : 'success') : ''"
               [required]="getConfigValue('forms.validation.address.required')"
               [attr.aria-invalid]="address.invalid && address.touched ? true : null">
        <ng-container *ngIf="address.invalid && address.touched">
          <p class="error-message" *ngIf="address.errors?.required">
            Address is required!
          </p>
        </ng-container>
      </div>
    </div>

  </div>


  <div class="row ">
    <div class="col-md-6">
      <div class="form-control-group">
        <label class="label" for="input-name">Landline #:</label>
        <input nbInput
               [(ngModel)]="user.landline"
               #landline="ngModel"
               id="input-landline"
               name="landline"
               placeholder="Landline"
               fullWidth
               [status]="landline.dirty ? (landline.invalid  ? 'danger' : 'success') : ''"
               [required]="getConfigValue('forms.validation.landline.required')"
               [attr.aria-invalid]="landline.invalid && landline.touched ? true : null">
        <ng-container *ngIf="landline.invalid && landline.touched">
          <p class="error-message" *ngIf="landline.errors?.required">
            Landline Number is required!
          </p>
        </ng-container>
      </div>
    </div>
    <div class="col-md-6">
      <div class="form-control-group">
        <label class="label" for="input-email">Mobile:</label>
        <input nbInput
               [(ngModel)]="user.mobile"
               #mobile="ngModel"
               id="input-mobile"
               name="mobile"
               placeholder="Mobile Number"
               fullWidth
               [status]="mobile.dirty ? (mobile.invalid  ? 'danger' : 'success') : ''"
               [required]="getConfigValue('forms.validation.mobile.required')"
               [attr.aria-invalid]="mobile.invalid && mobile.touched ? true : null">
        <ng-container *ngIf="mobile.invalid && mobile.touched">
          <p class="error-message" *ngIf="mobile.errors?.required">
            Mobile Number is required!
          </p>
        </ng-container>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-6">
      <div class="form-control-group">
        <label class="label" for="input-email">Email address:</label>
        <input nbInput
               [(ngModel)]="user.email"
               #email="ngModel"
               id="input-email"
               name="email"
               pattern=".+@.+..+"
               placeholder="Email address"
               fullWidth
               [status]="email.dirty ? (email.invalid  ? 'danger' : 'success') : ''"
               [required]="getConfigValue('forms.validation.email.required')"
               [attr.aria-invalid]="email.invalid && email.touched ? true : null">
        <ng-container *ngIf="email.invalid && email.touched">
          <p class="error-message" *ngIf="email.errors?.required">
            Email is required!
          </p>
          <p class="error-message" *ngIf="email.errors?.pattern">
            Email should be the real one!
          </p>
        </ng-container>
      </div>
    </div>
    <div class="col-md-6">
      <div class="form-control-group">
        <label class="label" for="input-password">Password:</label>
        <input nbInput
               [(ngModel)]="user.password"
               #password="ngModel"
               type="password"
               id="input-password"
               name="password"
               placeholder="Password"
               fullWidth
               [status]="email.dirty ? (email.invalid  ? 'danger' : 'success') : ''"
               [required]="getConfigValue('forms.validation.password.required')"
               [minlength]="getConfigValue('forms.validation.password.minLength')"
               [maxlength]="getConfigValue('forms.validation.password.maxLength')"
               [attr.aria-invalid]="password.invalid && password.touched ? true : null">
        <ng-container *ngIf="password.invalid && password.touched">
          <p class="error-message" *ngIf="password.errors?.required">
            Password is required!
          </p>
          <p class="error-message" *ngIf="password.errors?.minlength || password.errors?.maxlength">
            Password should contains
            from {{ getConfigValue('forms.validation.password.minLength') }}
            to {{ getConfigValue('forms.validation.password.maxLength') }}
            characters
          </p>
        </ng-container>
      </div>
    </div>
  </div>


  <div class="row ">
    <div class="col-md-6">
      <div class="form-control-group">
        <label class="label" for="input-name">No # Students:</label>
        <nb-select [(ngModel)]="user.students"
                   #students="ngModel"
                   id="input-students"
                   type="number"
                   name="students"
                   fullWidth
                   placeholder="Select No. Of Students"
                   [status]="students.dirty ? (students.invalid  ? 'danger' : 'success') : ''"
                   [required]="getConfigValue('forms.validation.students.required')"
                   [attr.aria-invalid]="students.invalid && students.touched ? true : null">
          <nb-option value="1">1 -100</nb-option>
          <nb-option value="2">101 - 200</nb-option>
          <nb-option value="3">201 - 300</nb-option>
          <nb-option value="4">301 - 400</nb-option>
        </nb-select>
        <ng-container *ngIf="students.invalid && students.touched">
          <p class="error-message" *ngIf="students.errors?.required">
            Number of Students is required!
          </p>
        </ng-container>
      </div>
    </div>
    <div class="col-md-6">
      <div class="form-control-group">
        <label class="label" for="input-email">No # Teachers:</label>
        <nb-select [(ngModel)]="user.teachers"
                   #teachers="ngModel"
                   id="input-teachers"
                   name="teachers"
                   fullWidth
                   type="number"
                   [status]="teachers.dirty ? (teachers.invalid  ? 'danger' : 'success') : ''"
                   [required]="getConfigValue('forms.validation.teachers.required')"
                   [attr.aria-invalid]="teachers.invalid && teachers.touched ? true : null"
                   placeholder="Select No. Of Teachers">
          <nb-option value="1">1 -10</nb-option>
          <nb-option value="2">11 - 20</nb-option>
          <nb-option value="3">21 - 30</nb-option>
          <nb-option value="4">31 - 40</nb-option>
        </nb-select>
        <ng-container *ngIf="teachers.invalid && teachers.touched">
          <p class="error-message" *ngIf="teachers.errors?.required">
            Number of Teachers is required!
          </p>
        </ng-container>
      </div>
    </div>
  </div>
  <div class="row ">
    <div class="col-md-6">
      <div class="form-control-group">
        <label class="label" for="input-email">Sector:</label>

        <nb-select [(ngModel)]="user.sector"
                   #sector="ngModel"
                   id="input-sector"
                   name="sector"
                   fullWidth
                   type="number"
                   [status]="sector.dirty ? (sector.invalid  ? 'danger' : 'success') : ''"
                   [required]="getConfigValue('forms.validation.sector.required')"
                   [attr.aria-invalid]="sector.invalid && sector.touched ? true : null"
                   placeholder="Select sector">
          <nb-option value="1">Government</nb-option>
          <nb-option value="2">Semi Government</nb-option>
          <nb-option value="3">Private</nb-option>
        </nb-select>
        <ng-container *ngIf="sector.invalid && sector.touched">
          <p class="error-message" *ngIf="sector.errors?.required">
            Sector is required!
          </p>
        </ng-container>
      </div>
    </div>
    
  </div>


  <div class="row" style="max-height:300px;height:300px;">
    <div class="col-md-12" style="height: 100%;">
      <agm-map [latitude]="lat" [longitude]="lng"
               [zoom]="zoom" [disableDefaultUI]="false" [zoomControl]="false">
        <agm-marker *ngFor="let m of markers; let i = index"
                    [latitude]="m.lat"
                    [longitude]="m.lng"
                    [label]="m.label"
                    [markerDraggable]="m.draggable"
                    (dragEnd)="markerDragEnd(m, $event)">

          <agm-info-window>
            <strong>InfoWindow content</strong>
          </agm-info-window>

        </agm-marker>

        <agm-circle [latitude]="lat + 0.3" [longitude]="lng"
                    [radius]="5000"
                    [fillColor]="'red'"
                    [circleDraggable]="true"
                    [editable]="true">
        </agm-circle>
      </agm-map>
    </div>
  </div>

  <div class="form-control-group accept-group" *ngIf="getConfigValue('forms.register.terms')">
    <nb-checkbox name="terms" [(ngModel)]="user.terms" [required]="getConfigValue('forms.register.terms')">
      Agree to <a href="#" target="_blank"><strong>Terms & Conditions</strong></a>
    </nb-checkbox>
  </div>
  <button nbButton
          fullWidth
          status="success"
          [disabled]="submitted || !form.valid"
          [class.btn-pulse]="submitted">
    Register
  </button>
</form>
<section *ngIf="socialLinks && socialLinks.length > 0" class="links" aria-label="Social sign in">
  or enter with:
  <div class="socials">
    <ng-container *ngFor="let socialLink of socialLinks">
      <a *ngIf="socialLink.link"
         [routerLink]="socialLink.link"
         [attr.target]="socialLink.target"
         [attr.class]="socialLink.icon"
         [class.with-icon]="socialLink.icon">{{ socialLink.title }}</a>
      <a *ngIf="socialLink.url"
         [attr.href]="socialLink.url"
         [attr.target]="socialLink.target"
         [attr.class]="socialLink.icon"
         [class.with-icon]="socialLink.icon">{{ socialLink.title }}</a>
    </ng-container>
  </div>
</section>
<section class="another-action" aria-label="Sign in">
  Already have an account? <a class="text-link" routerLink="../login">Log in</a>
</section>
